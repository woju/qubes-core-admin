---
version: 1
disable_existing_loggers: False

LOGFILE:
  - &LOGFILE /var/log/qubes/qubes.log

LEVELNAME: &LEVELNAME
  DEBUG:    {color: green}
  INFO:     {color: magenta}
  VERBOSE:  {color: blue}
  WARNING:  {color: yellow}
  ERROR:    {color: red}
  CRITICAL: {color: red, bold: True}

# Colors
# black, red, green, yellow, blue, magenta, cyan, white
#
# Styles:
# bold, faint, underline, inverse, strike_through,

formatters:
  console:
    format: 'CONS: %(message)s'
  simple:
    format: "SIMP %(asctime)s - %(levelname)8s - %(message)s"
  info:
    #format: 'INFO: %(asctime)s%(levelname)8s: %(module)s.%(funcName)s: %(message)s'
    #(): qubes.log.ColorFormatter
    (): logging.handlers.ColorFormatter
    format: 'INFO: %(asctime)s%(levelname)8s: %(name)s:[%(processName)s %(module)s.%(funcName)s:%(lineno)d]: %(message)s'
    colors:
      levelname:
        <<: *LEVELNAME  # Alias
        message:     {color: green}  #, bold: True}
      asctime:     {color: yellow}
      name:        {color: blue}
      processname: {color: white}
      module:      {color: cyan}
      funcName:    {color: black, inverse: True}
      lineno:      {color: red}
    dynamic_labels: [lineno,]

  debug:
    #format: 'DEBU: %(asctime)s%(levelname)8s: [%(processName)s %(module)s.%(funcName)s:%(lineno)d] %(name)s: %(message)s'
    format: 'DEBU: %(asctime)s%(levelname)8s: %(name)s:[%(processName)s %(module)s.%(funcName)s:%(lineno)d]: %(message)s'

handlers:
  console:
    class: logging.StreamHandler
    level: DEBUG
    formatter: simple
    stream: ext://sys.stdout

  FILE_HANDLER: &FILE_HANDLER
    class: logging.handlers.RotatingFileHandler
    #class: logging.handlers.ColorRotatingFileHandler
    level: INFO
    formatter: info
    filename: *LOGFILE
    maxBytes: 10485760 # 10MB
    backupCount: 5
    encoding: utf8

  info_file_handler:
    <<: *FILE_HANDLER

  #debug_file_handler:
  #  <<: *FILE_HANDLER
  #  level: DEBUG
  #  formatter: debug

loggers:
  qubes:
    level: INFO
    handlers: [console, info_file_handler]
    propagate: no
  #qubes.vm:
  #  level: DEBUG
  #  handlers: [console, debug_file_handler]
  #  propagate: no

root:
  level: INFO
  #handlers: [console, info_file_handler, debug_file_handler]
  handlers: [console, info_file_handler]

...
