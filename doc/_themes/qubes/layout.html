<!-- vim: set ts=2 sw=2 :-->
{% extends "basic/layout.html" %}
{# /usr/lib/python2.7/site-packages/sphinx/themes/basic/layout.html #}

{# ----------  THEME AND CSS ---------- #}
{# css - Custom #}
{% set css_custom = [
      '_static/semantic-1.2.0/semantic.min.css',
      '_static/qubes.css',
] %}
{% set css_files = css_custom %}

{# ----------  SCRIPT FILES ---------- #}

{# Remove old version of jQuery #}
{% set js_blacklist = [
    '_static/jquery.js',
] %}

{# Add to top of the list #}
{% set script_files_copy = [
    '_static/js/jquery-1.11.1.min.js',
    '_static/semantic-1.2.0/semantic.min.js',
    '_static/bootstrap-sphinx.js',
    '_static/qubes.js',
		] + script_files %}
{%- set script_files = [] %}

{# ----------  SIDE BAR ---------- #}
{%- set render_sidebar = (not embedded) and (not theme_nosidebar|tobool) and sidebars %}
{%- set content_width = render_sidebar and "twelve" or "sixteen"%}

{# ----------  DOCTYPE ---------- #}
{%- block doctype -%}
<!DOCTYPE html>
{%- endblock %}

{# ----------  MACROS ---------- #}

{# Scripts - Don't include any on blacklist #}
{%- macro scripts() %}
    {%- for scriptfile in script_files_copy %}
    {%- if scriptfile not in js_blacklist %}
    <script src="{{ pathto(scriptfile, 1) }}"></script>
    {%- endif %}
    {%- endfor %}
{%- endmacro %}

{% macro menuMobile() %}
{% include "menu_mobile.html" %}
{% endmacro %}

{% macro menu() %}
{% include "menu.html" %}
{% endmacro %}

{# ----------  HEAD ---------- #}
{%- block extrahead scoped %}
    <meta charset='utf-8'>
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
    <meta content="html5, ui, library, framework, javascript" name="keywords">
    {{ scripts() }}
{% endblock %}

{# ----------  HEADER ---------- #}
{# Silence the sidebar's, relbar's #}
{% block header %}{% endblock %}

{# ----------  BODY ---------- #}
{% block relbar1 %}{% endblock %}
{% block relbar2 %}{% endblock %}
{% block sidebarsourcelink %}{% endblock %}

{%- block content %}
{# ----------  MENUS ---------- #}
{{ menuMobile() }}

<div id="page" class="iu pusher">
	{{ menu() }}

	{# ----------  CONTENT ---------- #}
	<div id="content" class="ui grid">
		<div class="equal height row">
			<div class="{{ content_width }} wide computer sixteen wide tablet sixteen wide mobile column">
				<div class="ui horizontal segment">
					{% block body %}{% endblock %}
				</div>
			</div>
			{%- if render_sidebar %}
			<div id="sidebar-right" class="computer only four wide column">
				<div class="ui horizontal segment">
					{% block sidebar2 %}
						{%- for sidebartemplate in sidebars %}
							{%- include sidebartemplate %}
						{%- endfor %}
					{% endblock %}
				</div>
			</div>
		</div>
		{%- endif %}
	</div>
	{%- endblock %}

	{# ----------  FOOTER ---------- #}
	{%- block footer %}
	<div id="footer" class="footer">
		<div class="container">
			<p class="pull-right">
				<a href="#">Back to top</a>
				{% if theme_source_link_position == "footer" %}
					<br/>
					{% include "sourcelink.html" %}
				{% endif %}
			</p>
			<p>
			{%- if show_copyright %}
				{%- if hasdoc('copyright') %}
					{% trans path=pathto('copyright'), copyright=copyright|e %}&copy; <a href="{{ path }}">Copyright</a> {{ copyright }}.{% endtrans %}<br/>
				{%- else %}
					{% trans copyright=copyright|e %}&copy; Copyright {{ copyright }}.{% endtrans %}<br/>
				{%- endif %}
			{%- endif %}
			{%- if last_updated %}
				{% trans last_updated=last_updated|e %}Last updated on {{ last_updated }}.{% endtrans %}<br/>
			{%- endif %}
			{%- if show_sphinx %}
				{% trans sphinx_version=sphinx_version|e %}Created using <a href="http://sphinx-doc.org/">Sphinx</a> {{ sphinx_version }}.{% endtrans %}<br/>
			{%- endif %}
			</p>
		</div>
	</div>
	{%- endblock %}
</div>
